(function($){$(document).ready(function(){
function trapFocus($c){var f=$c.find('a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])').filter(':visible');var first=f.first(),last=f.last();$c.on('keydown.trap',function(e){if(e.key==='Tab'){if(e.shiftKey&&document.activeElement===first[0]){e.preventDefault();last.trigger('focus');}else if(!e.shiftKey&&document.activeElement===last[0]){e.preventDefault();first.trigger('focus');}}});}
function releaseFocus($c){$c.off('keydown.trap');}
function toggle(open){var $b=$('#msds-pw-button'),$p=$('#msds-pw-popup'),$o=$('#msds-pw-overlay');var isOpen=!$p.attr('hidden');var shouldOpen=(typeof open==='boolean')?open:!isOpen;if(shouldOpen){$p.removeAttr('hidden').attr('aria-hidden','false');$o.removeAttr('hidden');$b.attr('aria-expanded','true');trapFocus($p);setTimeout(function(){var $f=$p.find('input,select,textarea,button,a').filter(':visible').first();if($f.length){$f.trigger('focus');}},100);}else{$p.attr('hidden',true).attr('aria-hidden','true');$o.attr('hidden',true);$b.attr('aria-expanded','false');releaseFocus($p);}}$(document).on('click','#msds-pw-button',function(e){e.preventDefault();toggle();});$(document).on('click','#msds-pw-close',function(e){e.preventDefault();toggle(false);});$(document).on('click','#msds-pw-overlay',function(){toggle(false);});$(document).on('keydown',function(e){if(e.key==='Escape'){toggle(false);}});});})(jQuery);
